"use strict";(self["webpackChunkjili"]=self["webpackChunkjili"]||[]).push([[344],{5344:function(t,s,e){e.r(s),e.d(s,{default:function(){return u}});var d=function(){var t=this,s=t._self._c;t._self._setupProxy;return s("div",{staticClass:"body"},[s("div",{staticClass:"header"},[s("van-nav-bar",{attrs:{title:"地址列表",fixed:"","z-index":"999","left-text":"返回","left-arrow":""},on:{"click-left":t.goBack}},[s("van-icon",{attrs:{slot:"right",name:"search"},slot:"right"})],1)],1),s("div",{staticClass:"main"},[s("van-address-list",{attrs:{list:t.list,"disabled-list":t.disabledList,"disabled-text":"以下地址超出配送范围",switchable:!1},on:{add:t.onAdd,edit:t.onEdit},model:{value:t.chosenAddressId,callback:function(s){t.chosenAddressId=s},expression:"chosenAddressId"}}),s("van-popup",{attrs:{position:"bottom",overlay:!0},model:{value:t.show.add,callback:function(s){t.$set(t.show,"add",s)},expression:"show.add"}},[s("div",[s("van-address-edit",{attrs:{"area-list":t.areaList,"save-button-text":"确认新增","show-delete":!1,"show-search-result":""},on:{"tel-validator":t.checkTel,save:t.onSave}})],1)]),s("van-popup",{attrs:{position:"right",overlay:!0},model:{value:t.show.edit,callback:function(s){t.$set(t.show,"edit",s)},expression:"show.edit"}},[s("div",[s("van-button",{attrs:{type:"danger"},on:{click:t.delAddress}},[t._v("删除地址")])],1)])],1),s("div",{staticClass:"footer"})])},a=[],i=(e(7658),e(306)),o=e(521);console.log(i.Z);const n={data(){return{chosenAddressId:"1",list:[],disabledList:[],show:{add:!1,edit:!1},areaList:{province_list:{11e4:"北京市",12e4:"天津市"},city_list:{110100:"北京市",120100:"天津市"},county_list:{110101:"东城区",110102:"西城区",110105:"朝阳区",110106:"丰台区",120101:"和平区",120102:"河东区",120103:"河西区",120104:"南开区",120105:"河北区"}}}},methods:{onAdd(){this.show.add=!0},onEdit(t){this.chosenAddressId=t.id,this.show.edit=!0},checkTel(t){const s=/^\d{11}$/;return s.test(t)},onSave(t){const s={name:t.name,tel:t.tel,province:t.province,city:t.city,county:t.county,detail:t.addressDetail};i.Z.post("/users/addaddress",s).then((t=>{(0,o.Z)(t.data.msg),t.data.data&&(this.getAddress(),this.show.add=!1)}))},delAddress(){let t=new FormData;t.set("aid",this.chosenAddressId),i.Z.post("/users/deladdress",t).then((t=>{(0,o.Z)(t.data.msg),t.data.data&&(this.getAddress(),this.show.edit=!1)}))},getAddress(){i.Z.get("/users/address").then((t=>{this.list=[];for(let s=0;s<t.data.data.length;s++){const e=t.data.data[s];this.list.push({id:e.aid,name:e.name,tel:e.tel,address:`${e.province} ${e.city} ${e.county} ${e.detail}`})}}))},goBack(){this.$router.push("/person")}},mounted(){null==localStorage.getItem("user")?(0,o.Z)("您尚未登录!"):this.getAddress()}};var l=n,r=l,c=e(1001),h=(0,c.Z)(r,d,a,!1,null,null,null),u=h.exports}}]);
//# sourceMappingURL=344.508b80ea.js.map