{"version":3,"file":"js/344.508b80ea.js","mappings":"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","sources":["webpack://jili/./src/views/AddressView.vue","webpack://jili/src/views/AddressView.vue","webpack://jili/./src/views/AddressView.vue?3ee9","webpack://jili/./src/views/AddressView.vue?44ed"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"body\"},[_c('div',{staticClass:\"header\"},[_c('van-nav-bar',{attrs:{\"title\":\"地址列表\",\"fixed\":\"\",\"z-index\":\"999\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.goBack}},[_c('van-icon',{attrs:{\"slot\":\"right\",\"name\":\"search\"},slot:\"right\"})],1)],1),_c('div',{staticClass:\"main\"},[_c('van-address-list',{attrs:{\"list\":_vm.list,\"disabled-list\":_vm.disabledList,\"disabled-text\":\"以下地址超出配送范围\",\"switchable\":false},on:{\"add\":_vm.onAdd,\"edit\":_vm.onEdit},model:{value:(_vm.chosenAddressId),callback:function ($$v) {_vm.chosenAddressId=$$v},expression:\"chosenAddressId\"}}),_c('van-popup',{attrs:{\"position\":\"bottom\",\"overlay\":true},model:{value:(_vm.show.add),callback:function ($$v) {_vm.$set(_vm.show, \"add\", $$v)},expression:\"show.add\"}},[_c('div',[_c('van-address-edit',{attrs:{\"area-list\":_vm.areaList,\"save-button-text\":\"确认新增\",\"show-delete\":false,\"show-search-result\":\"\"},on:{\"tel-validator\":_vm.checkTel,\"save\":_vm.onSave}})],1)]),_c('van-popup',{attrs:{\"position\":\"right\",\"overlay\":true},model:{value:(_vm.show.edit),callback:function ($$v) {_vm.$set(_vm.show, \"edit\", $$v)},expression:\"show.edit\"}},[_c('div',[_c('van-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.delAddress}},[_vm._v(\"删除地址\")])],1)])],1),_c('div',{staticClass:\"footer\"})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"body\">\n        <div class=\"header\">\n            <van-nav-bar title=\"地址列表\" fixed z-index=\"999\" left-text=\"返回\" @click-left=\"goBack\" left-arrow>\n                <van-icon name=\"search\" slot=\"right\" />\n            </van-nav-bar>\n        </div>\n        <div class=\"main\">\n            <van-address-list\n                v-model=\"chosenAddressId\"\n                :list=\"list\"\n                :disabled-list=\"disabledList\"\n                disabled-text=\"以下地址超出配送范围\"\n                :switchable=\"false\"\n                @add=\"onAdd\"\n                @edit=\"onEdit\"\n                >\n                <!-- <template slot=\"top\">\n                    <div>\n                        <van-button style=\"width: 100%;\" type=\"danger\" round >删除选中地址</van-button>\n                    </div>\n                    <div>\n                        <van-divider></van-divider>\n                    </div>\n                </template> -->\n            </van-address-list>\n            <van-popup v-model=\"show.add\" position=\"bottom\" :overlay=\"true\">\n                <div>\n                    <van-address-edit\n                    :area-list=\"areaList\"\n                    save-button-text=\"确认新增\"\n                    @tel-validator=\"checkTel\"\n                    :show-delete=\"false\"\n                    show-search-result\n                    @save=\"onSave\"\n                    />\n                </div>\n            </van-popup>\n            <van-popup v-model=\"show.edit\" position=\"right\" :overlay=\"true\">\n                <div>\n                    <van-button type=\"danger\" @click=\"delAddress\">删除地址</van-button>\n                </div>\n            </van-popup>\n        </div>\n        <div class=\"footer\">\n        </div>\n    </div>\n</template>\n<style>\n    .body{\n        min-height: 100vh;\n        background-color: #f1f5f7;\n    }\n    .main{\n        margin-top: 3rem;\n    }\n    .footer{\n        position: fixed;\n        width: 100%;\n        bottom: 40px;\n    }\n</style>\n<script>\n    import axios from 'axios';\n    import { Toast } from 'vant';\n    console.log(axios);\n\n    const options = {\n        data(){\n            return {\n                chosenAddressId: '1',\n                list: [],\n                disabledList: [],\n                show:{\n                    add:false,\n                    edit:false,\n                },\n                areaList:{\n                    province_list: {\n                        110000: '北京市',\n                        120000: '天津市'\n                    },\n                    city_list: {\n                        110100: '北京市',\n                        120100: '天津市',\n                    },\n                    county_list: {\n                        110101: '东城区',\n                        110102: '西城区',\n                        110105: '朝阳区',\n                        110106: '丰台区',\n                        120101: '和平区',\n                        120102: '河东区',\n                        120103: '河西区',\n                        120104: '南开区',\n                        120105: '河北区',\n                    }\n                }\n            }\n        },\n        methods:{\n            onAdd() {\n                // Toast('新增地址');\n                this.show.add = true;\n            },\n            onEdit(item) {\n                /**\n                 * 此函数为删除地址函数 delAddress 服务\n                 * item.id 就是 address.aid\n                 */\n                this.chosenAddressId = item.id;\n                this.show.edit = true;\n            },\n            checkTel(tel){\n                // 手机号校验正则\n                const reg = /^\\d{11}$/;\n                return reg.test(tel);\n            },\n            onSave(content){\n                /**\n                 * 新增地址提交函数\n                 */\n                const address = {\n                    name: content.name,\n                    tel: content.tel,\n                    province: content.province,\n                    city: content.city,\n                    county: content.county,\n                    detail: content.addressDetail\n                }\n                axios.post(\"/users/addaddress\",address).then((resp)=>{\n                    Toast(resp.data.msg);\n                    if (resp.data.data) {\n                        this.getAddress();\n                        this.show.add = false;\n                    }\n                });\n            \n            },\n            delAddress(){\n                let form = new FormData();\n                form.set(\"aid\",this.chosenAddressId);\n                axios.post(\"/users/deladdress\",form).then((resp)=>{\n                    Toast(resp.data.msg);\n                    if (resp.data.data) {\n                        this.getAddress();\n                        this.show.edit = false;\n                    }\n                });\n            },\n            getAddress(){\n                axios.get(\"/users/address\").then((resp)=>{\n                    this.list = []\n                    for (let index = 0; index < resp.data.data.length; index++) {\n                        const e = resp.data.data[index];\n                        // console.log(e);\n                        this.list.push(\n                            {\n                                id: e.aid,\n                                name: e.name,\n                                tel: e.tel,\n                                address: `${e.province} ${e.city} ${e.county} ${e.detail}`\n                            }\n                        )\n                    }\n                })\n            },\n            goBack(){\n                this.$router.push(\"/person\")\n            }\n        },\n        mounted(){\n            if (localStorage.getItem(\"user\") == null) {\n                Toast(\"您尚未登录!\");\n            }else{\n                this.getAddress();\n            }\n        }\n    };\n\n    export default options;\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AddressView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AddressView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddressView.vue?vue&type=template&id=bd3469bc&\"\nimport script from \"./AddressView.vue?vue&type=script&lang=js&\"\nexport * from \"./AddressView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AddressView.vue?vue&type=style&index=0&id=bd3469bc&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","_setupProxy","staticClass","attrs","on","goBack","slot","list","disabledList","onAdd","onEdit","model","value","chosenAddressId","callback","$$v","expression","show","add","$set","areaList","checkTel","onSave","edit","delAddress","_v","staticRenderFns","console","log","axios","options","data","province_list","city_list","county_list","methods","item","id","tel","reg","test","content","address","name","province","city","county","detail","addressDetail","post","then","resp","Toast","msg","getAddress","form","FormData","set","get","index","length","e","push","aid","$router","mounted","localStorage","getItem","component"],"sourceRoot":""}