"use strict";(self["webpackChunkjili"]=self["webpackChunkjili"]||[]).push([[536],{2536:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var n=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"body"},[e("div",{staticClass:"header"},[e("van-nav-bar",{attrs:{title:"文创商城",fixed:"",placeholder:"","left-text":"返回","left-arrow":""},on:{"click-left":t.goBack},scopedSlots:t._u([{key:"right",fn:function(){return[e("van-icon",{attrs:{name:"search",size:"18"}})]},proxy:!0}])}),e("van-search",{attrs:{clearable:"",shape:"round",background:"#4fc08d",placeholder:"请输入搜索关键词"},on:{search:t.searchItem},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),e("div",{staticClass:"main"},[e("div",t._l(t.items,(function(a){return e("div",{key:a.iid},[e("van-card",{attrs:{price:a.price,desc:a.comment,title:a.name,thumb:t.base+a.img},scopedSlots:t._u([{key:"num",fn:function(){return[t._v(" 库存: "+t._s(a.quantity)+" ")]},proxy:!0},{key:"tags",fn:function(){return[e("van-tag",{attrs:{plain:"",type:"danger"}},[t._v("标签")]),e("van-tag",{attrs:{plain:"",type:"danger"}},[t._v("标签")])]},proxy:!0},{key:"footer",fn:function(){return[e("van-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.addShopCar(a.iid)}}},[t._v("加入购物车")]),e("van-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.goItemInfo(a.iid)}}},[t._v("购买")])]},proxy:!0}],null,!0)}),e("br")],1)})),0)]),e("van-divider",[t._v("到底啦")]),e("div",{staticClass:"footer"},[e("van-pagination",{attrs:{"total-items":t.count,"show-page-size":3,"items-per-page":5,"force-ellipses":""},on:{change:t.pageChange},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)},r=[],s=(a(7658),a(306)),i=a(521);const o={data(){return{value:"",currentPage:1,count:100,items:[]}},computed:{base(){return s.Z.defaults.baseURL}},methods:{goBack(){this.$router.push("/index")},pageChange(){console.log(this.currentPage),s.Z.get(`/items/${this.currentPage}/5`).then((t=>{this.items=t.data.data}))},itemsCount(){s.Z.get("/items/count").then((t=>{this.count=parseInt(t.data.data)}))},addShopCar(t){let e=new FormData;e.set("iid",t),s.Z.post("/users/addshopcar",e).then((t=>{(0,i.Z)(t.data.msg)}))},goItemInfo(t){this.$router.push(`/iteminfo?iid=${t}`)},searchItem(){let t=new FormData;t.set("key",this.value),s.Z.post("/admin/search",t).then((t=>{this.items=t.data.data}))}},mounted(){this.itemsCount(),this.pageChange()}};var u=o,c=u,l=a(1001),d=(0,l.Z)(c,n,r,!1,null,null,null),p=d.exports}}]);
//# sourceMappingURL=536.f3379f0f.js.map