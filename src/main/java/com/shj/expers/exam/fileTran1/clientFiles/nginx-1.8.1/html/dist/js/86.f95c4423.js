"use strict";(self["webpackChunkjili"]=self["webpackChunkjili"]||[]).push([[86],{7086:function(t,a,e){e.r(a),e.d(a,{default:function(){return u}});var o=function(){var t=this,a=t._self._c;t._self._setupProxy;return a("div",{staticClass:"body"},[a("div",{staticClass:"header"},[a("van-nav-bar",{attrs:{title:"商品详情","left-text":"返回","left-arrow":""},on:{"click-left":t.goBack},scopedSlots:t._u([{key:"right",fn:function(){return[a("van-icon",{attrs:{name:"share",size:"18"},on:{click:function(a){t.show.share=!0}}})]},proxy:!0}])})],1),a("div",{staticClass:"main"},[a("div",{staticClass:"swipe"},[a("van-swipe",{attrs:{autoplay:1e4,"indicator-color":"black"}},[a("van-swipe-item",[a("van-image",{attrs:{width:"100%",fit:"cover",src:t.base+t.item.img}})],1),a("van-swipe-item",[a("van-image",{attrs:{width:"100%",fit:"cover",src:"https://img01.yzcdn.cn/vant/cat.jpeg"}})],1),a("van-swipe-item",[a("van-image",{attrs:{width:"100%",fit:"cover",src:"https://img01.yzcdn.cn/vant/apple-2.jpg"}})],1)],1)],1),a("div",{staticClass:"item-price"},[a("van-cell",[a("span",{staticStyle:{color:"#F90909"}},[t._v("¥")]),t._v(" "),a("span",{staticStyle:{"font-size":"1.5rem",color:"#dd3b34"}},[t._v("80")])])],1),a("van-divider"),a("div",{staticClass:"item-name"},[a("van-row",[a("van-col",{attrs:{span:6}},[a("div",{staticStyle:{width:"100%"}},[a("van-tag",{attrs:{round:"",type:t.tag,size:"large"}},[t._v(t._s(t.tagValue))])],1)]),a("van-col",{attrs:{span:15}},[a("div",[t._v(" "+t._s(t.item.name)+" ")]),a("div",[t._v(" "+t._s(t.item.comment)+" ")])])],1)],1),a("div",{staticClass:"item-desc"},[a("van-grid",[a("van-grid-item",{attrs:{icon:"photo-o",text:"文字"}}),a("van-grid-item",{attrs:{icon:"photo-o",text:"文字"}}),a("van-grid-item",{attrs:{icon:"photo-o",text:"文字"}}),a("van-grid-item",{attrs:{icon:"photo-o",text:"文字"}})],1)],1),a("div",{staticClass:"item-tran"},[a("van-cell-group",{attrs:{inset:""}},[a("van-cell",{attrs:{icon:"location-o",value:"河北工业大学文创","is-link":""}}),a("van-cell",{attrs:{icon:"after-sale",value:"7天无理由退款","is-link":""}})],1)],1),a("div",{staticClass:"item-comments"},[a("van-cell-group",{attrs:{inset:""}},[a("van-cell",{attrs:{icon:"location-o",value:"商品评论(5)","is-link":""},on:{click:t.showComm}}),a("van-popup",{style:{height:"40%","background-color":"#f2f5f7"},attrs:{position:"bottom"},model:{value:t.showComment,callback:function(a){t.showComment=a},expression:"showComment"}},t._l(t.userComments,(function(t){return a("div",{key:t.uid},[a("van-cell",{attrs:{icon:"user-circle-o",title:t.username,value:t.date,size:"large",label:t.comment}})],1)})),0)],1)],1),a("br"),a("br"),a("br")],1),a("van-divider",[t._v("到底啦")]),a("div",{staticClass:"footer"},[a("van-goods-action",[a("van-goods-action-icon",{attrs:{icon:"chat-o",text:"客服",color:"#ee0a24"},on:{click:t.chat}}),a("van-goods-action-icon",{attrs:{icon:"cart-o",text:"购物车"},on:{click:t.goShopCar}}),a("van-goods-action-icon",{attrs:{icon:"star",text:"已收藏",color:"#ff5000"},on:{click:t.collectItem}}),a("van-goods-action-button",{attrs:{type:"warning",text:"加入购物车"},on:{click:t.addToShopCar}}),a("van-goods-action-button",{attrs:{type:"danger",text:"立即购买"},on:{click:t.onBuy}})],1),a("van-popup",{attrs:{position:"bottom",overlay:!0},model:{value:t.show.buy,callback:function(a){t.$set(t.show,"buy",a)},expression:"show.buy"}},[a("div",{staticStyle:{"text-align":"left"}},[t._v(" 请选择您的收货地址 ")]),a("div",[a("van-radio-group",{model:{value:t.radio,callback:function(a){t.radio=a},expression:"radio"}},[a("van-cell-group",[t._l(t.addressList,(function(e){return a("van-cell",{key:e.aid,attrs:{clickable:"",title:`${e.name}  ${e.tel}                      `,label:`${e.province} ${e.city} ${e.county}`},on:{click:function(a){t.radio=e.aid}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[a("van-radio",{attrs:{name:e.aid}})]},proxy:!0}],null,!0)})})),a("div",{staticStyle:{"border-left":"0.5px solid","border-right":"0.5px solid"}},[a("div",{staticStyle:{border:"0.5px solid"}}),a("van-cell",{attrs:{clickable:"","title-class":"self-pick",title:"到店自取 - 河北工业大学"},on:{click:function(a){t.radio=1}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[a("van-radio",{attrs:{name:1}})]},proxy:!0}])}),a("div",{staticStyle:{border:"0.5px solid"}})],1)],2)],1)],1),a("div",[a("van-cell-group",[a("van-field",{attrs:{"left-icon":"chat-o",clearable:"",label:"备注",type:"textarea",placeholder:"请输入备注,最长100字"},model:{value:t.orderComment,callback:function(a){t.orderComment=a},expression:"orderComment"}})],1)],1),a("br"),a("div",[a("van-button",{staticStyle:{width:"100%"},attrs:{type:"danger"},on:{click:t.submitOrder}},[t._v("提交订单")])],1)]),a("van-popup",{model:{value:t.show.pay,callback:function(a){t.$set(t.show,"pay",a)},expression:"show.pay"}},[a("div",[a("h3",[t._v(" 请支付 ")])]),a("div",[a("van-image",{attrs:{width:"100%",fit:"cover",src:e(4026)}})],1)])],1)],1)},i=[],n=(e(7658),e(521)),s=e(306);const r={data(){return{show:{share:!1,buy:!1,pay:!1},showComment:!1,radio:null,images:["https://img01.yzcdn.cn/vant/apple-1.jpg","https://img01.yzcdn.cn/vant/apple-2.jpg"],userComments:[],tag:"",tagValue:"",item:{},addressList:[],orderComment:""}},computed:{base(){return s.Z.defaults.baseURL}},methods:{showPopup(){},goBack(){this.$router.push("/index")},showComm(){this.showComment=!0},chat(){},goShopCar(){this.$router.push("/shoppingcar")},collectItem(){},addToShopCar(){let t=new FormData;t.set("iid",this.item.iid),s.Z.post("/users/addshopcar",t).then((t=>{(0,n.Z)(t.data.msg)}))},getItemInfo(){let t,a;try{t=window.location.href.split("?")[1],a=t.split("=")[1]}catch(e){(0,n.Z)(e)}void 0!=a?s.Z.get(`/items/info?iid=${a}`).then((t=>{this.item=t.data.data})):(0,n.Z)("页面繁忙,请稍后再试!")},onBuy(){this.getAddress(),this.show.buy=!0},getAddress(){s.Z.get("/users/address").then((t=>{this.addressList=t.data.data,null==t.data.data&&(0,n.Z)("您尚未登录!")}))},submitOrder(){if(null==this.radio)return void(0,n.Z)("请选择收货地址!");if(this.orderComment.length>100)return void(0,n.Z)("备注内容过长!");const t={iid:this.item.iid,aid:this.radio,comment:this.orderComment};s.Z.post("/users/buy",t).then((t=>{(0,n.Z)(t.data.msg),this.show.buy=!1;const a=this;setTimeout((function(){a.show.pay=!0}),2e3)}))},randomComment(){function t(){const t=new Date(2023,0,1),a=new Date,e=new Date(t.getTime()+Math.random()*(a.getTime()-t.getTime()));return e.toISOString().split("T")[0]}function a(){const t=["Smith","Johnson","Brown","Taylor","Williams","Jones","Miller","Davis","García","Martinez"],a=Math.floor(Math.random()*t.length);return t[a]}function e(){const t=["非常棒的产品，我很喜欢！","出色的服务和质量。","强烈推荐！","卓越的体验。","我对购买非常满意。"],a=Math.floor(Math.random()*t.length);return t[a]}function o(o){const i=[];for(let n=0;n<o;n++){const o={uid:n,username:a(),date:t(),comment:e()};i.push(o)}return i}const i=5,n=o(i);this.userComments=n},randomTag(){const t=["primary","danger","success"],a=Math.round(100*Math.random())%t.length;switch(this.tag=t[a],a){case 0:this.tagValue="人气新品";break;case 1:this.tagValue="爆款热卖";break;case 2:this.tagValue="好物推荐";break;default:break}}},mounted(){this.getItemInfo(),this.randomComment(),this.randomTag()}};var c=r,l=c,d=e(1001),m=(0,d.Z)(l,o,i,!1,null,"0b6a6031",null),u=m.exports},4026:function(t,a,e){t.exports=e.p+"img/pay.20e44b32.jpg"}}]);
//# sourceMappingURL=86.f95c4423.js.map